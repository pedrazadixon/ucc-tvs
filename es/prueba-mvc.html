<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="../assets/icon.png">

  <title>Prueba de Poker | UCC</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css" />
  <link rel="stylesheet" href="../assets/styles.css" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/underscore@1.13.1/underscore-umd-min.js"></script>
  <script src="../assets/bundle.js"></script>
  <script src="../assets/app.js"></script>
</head>

<body class="h-100">

  <nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">UCC</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Inicio</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="numeros-aleatorios" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              Números aleatorios
            </a>
            <ul class="dropdown-menu" aria-labelledby="numeros-aleatorios">
              <li><a class="dropdown-item" href="aleatorios-uniforme.html">Distribución uniforme</a></li>
              <li><a class="dropdown-item" href="aleatorios-normal.html">Distribución normal</a></li>
              <li><a class="dropdown-item" href="aleatorios-bernoulli.html">Distribución Bernoulli</a></li>
              <li><a class="dropdown-item" href="aleatorios-beta.html">Distribución beta</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="pruebas-bondad" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              Bondad de ajuste
            </a>
            <ul class="dropdown-menu" aria-labelledby="pruebas-bondad">
              <li><a class="dropdown-item" href="prueba-mvc.html">Prueba de medias, varianza y corridas</a></li>
              <li><a class="dropdown-item" href="prueba-series.html">Prueba de series</a></li>
              <li><a class="dropdown-item" href="prueba-poker.html">Prueba de poker</a></li>
            </ul>
          </li>
        </ul>

        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              es
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="https://pedrazadixon.github.io/ucc-tvs/es/prueba-mvc.html">Español</a></li>
              <li><a class="dropdown-item" href="https://pedrazadixon.github.io/ucc-tvs/en/prueba-mvc.html">English</a></li>
            </ul>
          </li>
        </ul>

      </div>
    </div>
  </nav>

  <div class="row h-100 m-3">
    <div class="col-2">
        <div class="row" style="min-height: 400px">
            <textarea id="numeros_aleatorios" class="min-vh-50">
               0.4325202
               0.4960076
               0.4094493
               0.8166794
               0.8058110
               0.4458940
               0.6964420
               0.3063310
               0.1068915
               0.1752696
               0.2032774
               0.5075659
               0.6278124
               0.7545592
               0.9432906
               0.5840404
               0.8489699
               0.7909855
               0.4424413
               0.8026491
               0.4665091
               0.2237957
               0.7474305
               0.1845450
               0.4645547
               0.0780780
               0.2316243
               0.6160249
               0.2287070
               0.6293505
               0.3068168
               0.4267608
               0.6789167
               0.1708046
               0.5151052
               0.1278449
               0.9319929
               0.9579151
               0.9318469
               0.8582857
               0.5370179
               0.2181011
               0.7889059
               0.3537412
               0.7246670
               0.7094190
               0.8831558
               0.6616070
               0.5443895
               0.1869767
               0.1116390
               0.1102190
               0.0727507
               0.8774977
               0.1842127
               0.8403142
               0.6172169
               0.4282384
               0.7657166
               0.4053337
               0.6500550
               0.3538908
               0.6958559
               0.1680101
               0.6659593
               0.7602106
               0.2399108
               0.4515027
               0.6435187
               0.5066427
               0.2017592
               0.6878926
               0.3833956
               0.1682695
               0.7361458
               0.8496140
               0.5660570
               0.6192436
               0.2927221
               0.5819984
               0.9880803
               0.7852659
               0.7708826
               0.1604738
               0.2190165
               0.3634879
               0.2072338
               0.2055054
               0.5039202
               0.9787430
               0.6061883
               0.9678812
               0.9436690
               0.1816443
               0.0992366
               0.0385986
               0.5156974
               0.0998588
               0.2673458
               0.8135689             
            </textarea>
        </div>

        <div class="row mt-3">
            <button class="btn btn-primary" onclick="ejecutarPrueba()">
                Ejecutar
            </button>
        </div>
    </div>

    <div class="col-10" id="contenido" style="display: none">
        <div class="row m-3">
            <div class="card mt-2 col-3 m-3">
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Ho</th>
                                <td><span id="media_ho"></span></td>
                            </tr>
                            <tr>
                                <th>H1</th>
                                <td><span id="media_h1"></span></td>
                            </tr>
                            <tr>
                                <th>Promedio</th>
                                <td><span id="media_promedio"></span></td>
                            </tr>
                            <tr>
                                <th>Cantidad numeros</th>
                                <td><span id="media_cantidad_num"></span></td>
                            </tr>
                            <tr>
                                <th>Alpha</th>
                                <td><span id="media_alpha"></span></td>
                            </tr>
                            <tr>
                                <th>Zalpha/2</th>
                                <td><span id="media_zalpha"></span></td>
                            </tr>
                            <tr>
                                <th>Lim Superior(prom)</th>
                                <td><span id="media_lim_superior"></span></td>
                            </tr>
                            <tr>
                                <th>Lim Inferior (prom)</th>
                                <td><span id="media_lim_inferior"></span></td>
                            </tr>
                            <tr>
                                <th>Decisión</th>
                                <td><span id="media_decision"></span></td>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>


            <div class="card mt-2 col-4 m-3">
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Ho</th>
                                <td><span id="varianza_ho"></span></td>
                            </tr>
                            <tr>
                                <th>H1</th>
                                <td><span id="varianza_h1"></span></td>
                            </tr>
                            <tr>
                                <th>Promedio</th>
                                <td><span id="varianza_promedio"></span></td>
                            </tr>
                            <tr>
                                <th>Cantidad numeros</th>
                                <td><span id="varianza_cantidad_num"></span></td>
                            </tr>
                            <tr>
                                <th>Alpha</th>
                                <td><span id="varianza_alpha"></span></td>
                            </tr>
                            <tr>
                                <th>Ji-Cuadrado(Alpha/2)</th>
                                <td><span id="varianza_2jialpha"></span></td>
                            </tr>
                            <tr>
                                <th>Ji-Cuadrado(1-alpha)</th>
                                <td><span id="varianza_1jialpha"></span></td>
                            </tr>
                            <tr>
                                <th>Lim Superior(prom)</th>
                                <td><span id="varianza_lim_inferior"></span></td>
                            </tr>
                            <tr>
                                <th>Lim Inferior (prom)</th>
                                <td><span id="varianza_lim_superior"></span></td>
                            </tr>
                            <tr>
                                <th>Decisión</th>
                                <td><span id="varianza_decision"></span></td>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>


            <div class="card mt-2 col-3 m-3">
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Datos</th>
                                <td><span id="corridas_datos"></span></td>
                            </tr>
                            <tr>
                                <th>Numero de corridas Co</th>
                                <td><span id="corridas_num_corridas"></span></td>
                            </tr>
                            <tr>
                                <th>Media de corridas</th>
                                <td><span id="corridas_media"></span></td>
                            </tr>
                            <tr>
                                <th>Varianza de corridas</th>
                                <td><span id="corridas_varianza"></span></td>
                            </tr>
                            <tr>
                                <th>Estadistico Zo</th>
                                <td><span id="corridas_estadistico"></span></td>
                            </tr>
                            <tr>
                                <th>Alpha</th>
                                <td><span id="corridas_alpha"></span></td>
                            </tr>
                            <tr>
                                <th>Z(alpha/2)</th>
                                <td><span id="corridas_zalpha"></span></td>
                            </tr>
                            <tr>
                                <th>Desicion</th>
                                <td><span id="corridas_desicion"></span></td>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

</div>

<script>

    var ejecutarPrueba = function () {
        var lineas = $("#numeros_aleatorios").val().split("\n");
        var total_numeros = 0;
        var procesado = [];

        for (var i = 0; i < lineas.length; i++) {
            var valor = lineas[i].trim();
            if (valor !== "") {

                procesado[total_numeros] = parseFloat(valor.replace(",", "."));
                total_numeros++;
            }
        }
        if (procesado.length == 0) return 0;

        $("#contenido").show();

        pruebaMedia(procesado);
        pruebaVarianza(procesado);
        pruebaCorridas(procesado);

    }

    var pruebaMedia = function (numeros) {

        let sum = 0;
        numeros.forEach(function (numero) {
            sum += parseFloat(numero);
        });

        var avg = parseFloat(sum / numeros.length);
        var zalpha = -1.959963985;
        var lim_superior = parseFloat(0.5 - zalpha * (1 / Math.sqrt(12 * numeros.length)))
        var lim_inferior = parseFloat(0.5 + zalpha * (1 / Math.sqrt(12 * numeros.length)))
        var decision = (lim_inferior < avg && lim_superior > avg) ? "se acepta Ho" : "no se acepta Ho";

        $("#media_ho").text("Media=0,5");
        $("#media_h1").text("Media<>0,5");
        $("#media_promedio").text(avg.toFixed(7));
        $("#media_cantidad_num").text(numeros.length);
        $("#media_alpha").text(0.05);
        $("#media_zalpha").text(zalpha);
        $("#media_lim_inferior").text(lim_inferior.toFixed(7));
        $("#media_lim_superior").text(lim_superior.toFixed(7));
        $("#media_decision").text(decision);

    }

    var pruebaVarianza = function (numeros) {
        let sum = 0;

        var variance = jStat.variance(numeros, true).toFixed(10)
        var alpha = 0.05;
        var zalpha = -1.959963985;
        var jialpha_2 = jStat.chisquare.inv((alpha / 2), (numeros.length - 1))
        var jialpha_1 = jStat.chisquare.inv((1 - alpha), (numeros.length - 1))
        var lim_inferior = +jialpha_2 / (12 * (numeros.length - 1))
        var lim_superior = +jialpha_1 / (12 * (numeros.length - 1))
        var decision = (lim_inferior < variance && lim_superior > variance) ? "se acepta Ho" : "no se acepta Ho";

        $("#varianza_ho").text("Varianza=1/12");
        $("#varianza_h1").text("Varianza<>1/12");
        $("#varianza_promedio").text(variance);
        $("#varianza_cantidad_num").text(numeros.length);
        $("#varianza_alpha").text(0.05);
        $("#varianza_2jialpha").text(jialpha_2.toFixed(7));
        $("#varianza_1jialpha").text(jialpha_1.toFixed(7));
        $("#varianza_lim_inferior").text(lim_inferior.toFixed(7));
        $("#varianza_lim_superior").text(lim_superior.toFixed(7));
        $("#varianza_decision").text(decision);

    }


    var pruebaCorridas = function (numeros) {
        var corridasS = [];
        var corridas = [];

        var index = 0;
        numeros.forEach(function (numero) {
            corridasS[index] = (numeros[index] <= numeros[index + 1]) ? 1 : 0;
            index = index + 1
        });

        var index = 0;
        corridasS.forEach(function (numero) {
            corridas[index] = (corridasS[index] != corridasS[index + 1]) ? 1 : 0;
            index = index + 1
        });

        var num_corridas = (corridas.reduce((a, b) => a + b, 0) - 1)
        var media_corridas = ((2 * numeros.length) - 1) / 3
        var varianza_corridas = ((16 * numeros.length) - 29) / 90
        var estadisticazo = Math.abs((num_corridas - media_corridas) / Math.sqrt(varianza_corridas))
        var alpha = 0.05
        var zalpha = 1.959963985
        var decision = (zalpha > estadisticazo) ? "se acepta Ho" : "no se acepta Ho";

        $("#corridas_datos").text(numeros.length);
        $("#corridas_num_corridas").text(num_corridas);
        $("#corridas_media").text(media_corridas.toFixed(7));
        $("#corridas_varianza").text(varianza_corridas.toFixed(7));
        $("#corridas_estadistico").text(estadisticazo.toFixed(7));
        $("#corridas_alpha").text(alpha);
        $("#corridas_zalpha").text(zalpha);
        $("#corridas_desicion").text(decision);

    }

</script>

  <footer class="footer bg-dark">
    <div class="footer-div">
      <span class="text-muted">Técnicas de Validación y Simulación. - 2021</span>
    </div>
  </footer>

</body>

</html>